{"version":3,"file":"kyue.js","sources":["../src/shared/util.ts","../src/core/util/debug.ts","../src/core/util/index.ts","../src/core/instance/lifecycle.ts","../src/core/instance/state.ts","../src/core/vdom/vnode.ts","../src/core/vdom/create-element.ts","../src/core/instance/render.ts","../src/core/instance/init.ts","../src/core/vdom/patch.ts","../src/core/instance/index.ts"],"sourcesContent":["\n\nexport function noop(a?: any, b?: any, c?: any) {}","import { noop } from '../../shared/util'\n\nexport let warn = noop\n\n\nif (process.env.NODE_ENV !== 'production') {\n    const hasConsole = typeof console !== 'undefined'\n\n    warn = (msg, vm) => {\n        const trace = ''// TODO\n\n        // TODO\n        if (hasConsole) {\n            console.error(`[Kyue warn]: ${msg}${trace}`)\n        }\n    }\n}","\nexport * from '../../shared/util'\nexport * from './debug'\n\n/**\n * 选择元素\n * @param el 元素id、class、DOM \n */\nexport function query(el: string | Element): Element {\n    if (typeof el === 'string') {\n        const selected = document.querySelector(el)\n        if (!selected) {\n            process.env.NODE_ENV !== 'production' && console.log('Cannot find element: ' + el)\n            return document.createElement('div')\n        }\n        return selected\n    } else {\n        return el\n    }\n}","export function lifecycleMixin(Kyue: any) {\n    Kyue.prototype._update = function(vnode: any, hydrating?: boolean) {\n        const vm = this\n        const prevVnode = vm._vnode\n\n        vm._vnode = vnode\n\n        if (!prevVnode) {\n            // initial render\n            vm.$el = vm.__patch__(vm.$el, vnode, hydrating, false)\n        } else {\n            // updates\n            vm.$el = vm.__patch__(prevVnode, vnode)\n        }\n\n\n    }\n}\n\nexport function initLifecycle(vm: any) {\n\n}\n\nexport function mountComponent(vm: any, el: Element, hydrating?: boolean) {\n    vm.$el = el\n\n    let updateComponent = () => {\n        vm._update(vm._render(), hydrating)\n    }\n\n\n    updateComponent()\n\n    // km上其实没有该方法 TODO\n    vm.updateComponent = updateComponent\n\n    return vm\n}","import { noop } from \"../util/index\";\n\nconst sharedPropertyDefinition = {\n    enumerable: true,\n    configurable: true,\n    get: noop,\n    set: noop\n}\n\nexport function proxy(target: Object, sourceKey: string, key: string) {\n    sharedPropertyDefinition.get = function proxyGetter() {\n        return this[sourceKey][key]\n    }\n    sharedPropertyDefinition.set = function proxySetter(val) {\n        this[sourceKey][key] = val\n    }\n    Object.defineProperty(target, key, sharedPropertyDefinition)\n}\n\n\nexport function initState(vm: any) {\n    const opts = vm.$options\n\n    if (opts.data) {\n        initData(vm)\n    }\n}\n\n\nfunction initData(vm: any) {\n    let data = vm.$options.data\n\n    data = vm._data = typeof data === 'function' ? getData(data, vm) : data || {}\n\n    const keys = Object.keys(data)\n\n    let i = keys.length\n\n    while (i--) {\n        const key = keys[i]\n\n        proxy(vm, `_data`, key)\n    }\n\n    // TODO observe data\n    // ...\n}\n\nexport function getData(data: Function, vm: any): any {\n    try {\n        return data.call(vm, vm)\n    } catch (e) {\n        // TODO\n        return {}\n    } finally {\n\n    }\n}","/**\n * vnode\n * {\n *     tag: 'div',// 元素标签名称\n *     data: {\n *         attr: { id: 'app' }// 元素的数据\n *     },\n *     children: []// 子元素\n * }\n */\nexport default class VNode {\n    tag: any;\n    data: any;\n    children: any;\n    text: string;\n    elm: any;\n\n    constructor(tag: any, data: any, children: any, text?: string, elm?: Element) {\n        this.tag = tag\n        this.data = data\n        this.children = children\n\n        this.text =  text\n        this.elm = elm\n    }\n}","import VNode from './vnode'\n\nexport function createElement(context: any, tag: any, data: any, children: any) {\n    if (Array.isArray(data)) {\n        children = data\n        data = undefined\n    }\n\n    return _createElement(context, tag, data, children)\n}\n\nexport function _createElement(context: any, tag: any, data: any, children: any) {\n    let vnode\n\n    vnode = new VNode(tag, data, children)\n\n    return vnode\n}","import { createElement } from '../vdom/create-element'\n\nexport function renderMixin(Kyue: any) {\n\n    Kyue.prototype._render = function() {\n        const vm = this\n        const { render, _parentVnode } = vm.$options\n\n        // 初始化 _parentVnode 为 undefined\n        vm.$vnode = _parentVnode\n        console.log('_render:', 'vm.$vnode = _parentVnodes (' + _parentVnode + ')')\n\n        let vnode\n\n        try {\n            vnode = render.call(vm, vm.$createElement)\n        } catch (e) {\n\n        } finally {\n\n        }\n\n        vnode.parent = _parentVnode\n\n        return vnode\n    }\n}\n\nexport function initRender(vm: any) {\n    vm._vnode = null\n\n    const options = vm.$options\n    const parentVnode = vm.$vnode = options._parentVnode\n\n    vm.$createElement = (a: any, b: any, c: any) => createElement(vm, a, b, c)\n}\n\n","import { initLifecycle } from './lifecycle'\nimport { initState } from './state'\nimport { initRender } from './render'\n\nlet uid = 0\n\nexport function initMixin(Kyue: any) {\n    Kyue.prototype._init = function(options?: Object) {\n        console.log('_init:', 'vm\\'s init')\n\n        const vm = this\n\n        vm._uid = uid++\n\n        vm._self = vm\n\n        vm.$options = options\n\n        /**\n         * 1、noop\n         */\n        initLifecycle(vm)\n        /**\n         * 1、给实例添加options.data中数据的代理 \n         */ \n        initState(vm)\n        /**\n         * 1、给实例添加$createElement方法\n         */\n        initRender(vm)\n\n        if (vm.$options.el) {\n            console.log('_init:', 'vm.$mount')\n            // 返回的是 vm\n            vm.$mount(vm.$options.el)\n        }\n\n    }\n}","import VNode from \"./vnode\";\n\n\nfunction emptyNodeAt(elm: Element) {\n    return new VNode(elm.tagName.toLocaleLowerCase(), {}, [], undefined, elm)\n}\n\nfunction createElm(vnode: any, insertedVnodeQueue: any, parentElm?: Element, refElm?: Element) {\n    console.log('createElm:', vnode)\n\n    const data = vnode.data\n    const children = vnode.children\n    const tag = vnode.tag\n\n    vnode.elm = vnode.ns\n        ? document.createElementNS(vnode.ns, tag)\n        : document.createElement(tag, vnode)\n\n    createChildren(vnode, children, insertedVnodeQueue)\n\n    if (data) {\n        setData(vnode, data);\n    }\n\n    insert(parentElm, vnode.elm, refElm)\n}\n\nfunction createChildren(vnode: any, children: [], insertedVnodeQueue: []) {\n    if (Array.isArray(children)) {\n\n    } else {\n        // TODO 需要 normalize children\n        let text = String(vnode.text || vnode.children)\n        vnode.elm.appendChild(document.createTextNode(text))\n    }\n}\n\nfunction setData(vnode: any, data: any) {\n    for (var key in data) {\n        if (key == 'attrs') {\n            for (var attr in data[key]) {\n                vnode.elm.setAttribute(attr, data[key][attr])\n            }\n        }\n    }\n}\n\nfunction insert(parent: Element, elm: Element, ref: Element) {\n    if (parent) {\n        if (ref) {\n            if (ref.parentNode === parent) {\n                parent.insertBefore(elm, ref)\n            }\n        } else {\n            parent.appendChild(elm)\n        }\n    }\n}\n\nfunction removeVnodes(vnodes: any, startIdx: number, endIdx: number) {\n    for (; startIdx <= endIdx; ++startIdx) {\n        const ch = vnodes[startIdx]\n        if (ch) {\n            if (ch.tag) {\n                // TODO\n                removeNode(ch.elm)\n            } else {// Text node\n                removeNode(ch.elm)\n            }\n        }\n    }\n}\n\nfunction removeNode(el: Element) {\n    const parent = el.parentNode\n\n    if (parent) {\n        parent.removeChild(el)\n    }\n}\n\n\nexport function patch(oldVnode: any, vnode: any, hydrating?: boolean, removeOnyl?: boolean) {\n    const insertedVnodeQueue: [] = [];\n\n    // 组件的 mount，生成一个新的root元素\n    if (typeof oldVnode === 'undefined') {\n        createElm(vnode, insertedVnodeQueue)\n    } else {\n        const isRealElement = oldVnode.nodeType\n\n        // TODO sameVnode(oldVnode, vnode)\n        if (!isRealElement) {\n            console.log('patch.update:', 'sameVnode')\n\n\n\n        } else {\n            if (isRealElement) {\n                oldVnode = emptyNodeAt(oldVnode)\n            }\n\n            const oldElm = oldVnode.elm\n            const parentElm = oldElm.parentNode\n    \n            createElm(\n                vnode,\n                insertedVnodeQueue,\n                oldElm._leaveCb ? null : parentElm,\n                oldElm.nextSibling\n            )\n\n            if (parentElm) {\n                removeVnodes([oldVnode], 0, 0)\n            }\n        }\n    }\n\n    return vnode.elm\n}","// @ts-nocheck\n\nimport { warn, query } from '../util/index'\nimport { initMixin } from './init'\nimport { lifecycleMixin, mountComponent } from './lifecycle'\nimport { renderMixin } from './render'\nimport { patch } from '../vdom/patch'\n\nfunction Kyue(options: any) {\n    if (process.env.NODE_ENV !== 'production' && !(this instanceof Kyue)) {\n        warn('Kyue is a constructor and should be called with the `new` keyword')\n    }\n    \n    this._init(options)\n}\n\nKyue.prototype.$mount = function(el?: string | Element, hydrating?: boolean) {\n    el = el && query(el)\n\n    return mountComponent(this, el, hydrating)\n}\n\nKyue.prototype.__patch__ = patch\n\n/**\n * 1、给实例添加_init方法\n * 2、组件调用 $mount 方法进行挂载\n */ \ninitMixin(Kyue)\n/**\n * 1、给实例添加_update方法 \n *  \n */ \nlifecycleMixin(Kyue)\n/**\n * 1、给实例添加_render方法\n *  该方法生成虚拟DOM：vnode\n */ \nrenderMixin(Kyue)\n\n\nexport default Kyue"],"names":[],"mappings":"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"}