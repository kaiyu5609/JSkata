{"version":3,"file":"kyue.js","sources":["../src/shared/util.ts","../src/core/util/debug.ts","../src/core/util/index.ts","../src/core/instance/lifecycle.ts","../src/core/instance/state.ts","../src/core/vdom/vnode.ts","../src/core/vdom/create-component.ts","../src/core/vdom/create-element.ts","../src/core/instance/render.ts","../src/core/instance/init.ts","../src/core/vdom/patch.ts","../src/core/instance/index.ts"],"sourcesContent":["// 这些助手由于其明确性和功能内联性，因此可以在JS引擎中生成更好的VM代码。\nexport function isUndef (v: any): boolean {\n    return v === undefined || v === null\n}\n\nexport function isDef (v: any): boolean {\n    return v !== undefined && v !== null\n}\n\nexport function isTrue (v: any): boolean {\n    return v === true\n}\n\nexport function isFalse (v: any): boolean {\n    return v === false\n}\n\n/**\n * 检查值是否为基础类型的\n * @param value \n */\nexport function isPrimitive (value: any): boolean {\n    return (\n        typeof value === 'string' ||\n        typeof value === 'number' ||\n        typeof value === 'symbol' ||\n        typeof value === 'boolean'\n    )\n}\n\n/**\n * 快速对象检查-当我们知道值是JSON兼容类型时，主要用于从原始值告诉对象\n * @param obj \n */\nexport function isObject (obj: any): boolean {// TODO mixed\n    return obj !== null && typeof obj === 'object'\n}\n\n/**\n * 获取值的原始类型字符串，例如：[object Object]\n */\nconst _toString = Object.prototype.toString\n\nexport function toRawType (value: any): string {\n    return _toString.call(value).slice(8, -1)\n}\n\nexport function isPlainObject (obj: any): boolean {\n    return _toString.call(obj) === '[object Object]'\n}\n\nexport function isRegExp (v: any): boolean {\n    return _toString.call(v) === '[object RegExp]'\n}\n\nexport function isPromise (val: any): boolean {\n    return (\n        isDef(val) && \n        typeof val.then === 'function' && \n        typeof val.catch === 'function'\n    )\n}\n\n/**\n * 将值转换为实际呈现的字符串\n * @param val \n */\nexport function toString(val: any): string {\n    return val == null \n        ? ''\n        : Array.isArray(val) || (isPlainObject(val) && val.toString === _toString)\n            ? JSON.stringify(val, null, 2)\n            : String(val)\n}\n\n/**\n * 将输入值转换为数字以保持持久性\n * 如果转换失败，则返回原始字符串\n * @param val \n */\nexport function toNumber (val: string): number | string {\n    const n = parseFloat(val)\n    return isNaN(n) ? val : n\n}\n\n/**\n * 从数组中删除项目\n * @param arr \n * @param item \n */\nexport function remove (arr: Array<any>, item: any): Array<any> | void {\n    if (arr.length) {\n        const index = arr.indexOf(item)\n        if (index > -1) {\n            return arr.splice(index, 1)\n        }\n    }\n}\n\nconst hasOwnProperty = Object.prototype.hasOwnProperty\nexport function hasOwn (obj: Object | Array<any>, key: string): boolean {\n    return hasOwnProperty.call(obj, key)\n}\n\n/**\n * 将类似数组的对象转换为真实数组\n * @param list \n * @param start \n */\nexport function toArray (list: any, start?: number): Array<any> {\n    start = start || 0\n    let i = list.length - start\n    const ret: Array<any> = new Array(i)\n    while (i--) {\n        ret[i] = list[i + start]\n    }\n    return ret\n}\n\n/**\n * 将属性混合到目标对象中\n * @param to \n * @param from \n */\nexport function extend (to: any, from?: any): Object {// TODO Object\n    for (const key in from) {\n        to[key] = from[key]\n    }\n    return to\n}\n\n\nexport function noop(a?: any, b?: any, c?: any) {}\n\n/**\n * 返回相同的值\n * @param _ \n */\nexport const identity = (_: any) => _\n\n/**\n * 确保一个函数仅被调用一次\n * @param fn \n */\nexport function once (fn: Function): Function {\n    let called = false\n    return function() {\n        if (!called) {\n            called = true\n            fn.apply(this, arguments)\n        }\n    }\n}","import { noop } from '../../shared/util'\n\nexport let warn = noop\n\n\nif (process.env.NODE_ENV !== 'production') {\n    const hasConsole = typeof console !== 'undefined'\n\n    warn = (msg, vm) => {\n        const trace = ''// TODO\n\n        // TODO\n        if (hasConsole) {\n            console.error(`[Kyue warn]: ${msg}${trace}`)\n        }\n    }\n}","\nexport * from '../../shared/util'\nexport * from './debug'\n\n/**\n * 选择元素\n * @param el 元素id、class、DOM \n */\nexport function query(el: string | Element): Element {\n    if (typeof el === 'string') {\n        const selected = document.querySelector(el)\n        if (!selected) {\n            process.env.NODE_ENV !== 'production' && console.log('Cannot find element: ' + el)\n            return document.createElement('div')\n        }\n        return selected\n    } else {\n        return el\n    }\n}","export let activeInstance: any = null\n\nexport function lifecycleMixin(Kyue: any) {\n    Kyue.prototype._update = function(vnode: any, hydrating?: boolean) {\n        const vm = this\n        const prevVnode = vm._vnode\n        const prevActiveInstance = activeInstance\n        activeInstance = vm\n\n        vm._vnode = vnode\n\n        if (!prevVnode) {\n            // initial render\n            vm.$el = vm.__patch__(vm.$el, vnode, hydrating, false)\n        } else {\n            // updates\n            vm.$el = vm.__patch__(prevVnode, vnode)\n        }\n        activeInstance = prevActiveInstance\n\n    }\n}\n\nexport function initLifecycle(vm: any) {\n    const options = vm.$options\n\n    let parent = options.parent\n    if (parent) {\n        parent.$children.push(vm)\n    }\n\n    vm.$parent = parent\n    vm.$root = parent ? parent.$root : vm\n\n    vm.$children = []\n}\n\nexport function mountComponent(vm: any, el: Element, hydrating?: boolean) {\n    vm.$el = el\n\n    let updateComponent = () => {\n        vm._update(vm._render(), hydrating)\n    }\n\n\n    updateComponent()\n\n    // km上其实没有该方法 TODO\n    vm.updateComponent = updateComponent\n\n    return vm\n}","import { noop } from \"../util/index\";\n\nconst sharedPropertyDefinition = {\n    enumerable: true,\n    configurable: true,\n    get: noop,\n    set: noop\n}\n\nexport function proxy(target: Object, sourceKey: string, key: string) {\n    sharedPropertyDefinition.get = function proxyGetter() {\n        return this[sourceKey][key]\n    }\n    sharedPropertyDefinition.set = function proxySetter(val) {\n        this[sourceKey][key] = val\n    }\n    Object.defineProperty(target, key, sharedPropertyDefinition)\n}\n\n\nexport function initState(vm: any) {\n    const opts = vm.$options\n\n    if (opts.data) {\n        initData(vm)\n    }\n}\n\n\nfunction initData(vm: any) {\n    let data = vm.$options.data\n\n    data = vm._data = typeof data === 'function' ? getData(data, vm) : data || {}\n\n    const keys = Object.keys(data)\n\n    let i = keys.length\n\n    while (i--) {\n        const key = keys[i]\n\n        proxy(vm, `_data`, key)\n    }\n\n    // TODO observe data\n    // ...\n}\n\nexport function getData(data: Function, vm: any): any {\n    try {\n        return data.call(vm, vm)\n    } catch (e) {\n        // TODO\n        return {}\n    } finally {\n\n    }\n}","export default class VNode {\n    tag: string | void;\n    data: any;\n    children: any;\n    text: string;\n    elm: any;\n    context: any;\n    componentOptions: any;\n\n    constructor(\n        tag?: string, \n        data?: any, \n        children?: any, \n        text?: string, \n        elm?: Element,\n        context?: any,\n        componentOptions?: any,\n    ) {\n        this.tag = tag\n        this.data = data\n        this.children = children\n\n        this.text =  text\n        this.elm = elm\n\n        this.context = context\n        this.componentOptions = componentOptions\n    }\n}\n\nexport function createTextVNode (val: string | number) {\n    return new VNode(undefined, undefined, undefined, String(val))\n}\n\nexport function cloneVNode (vnode: VNode): VNode {\n    const cloned = new VNode()\n\n    return cloned;\n}","import { isUndef, warn, isObject } from '../util/index'\nimport VNode from './vnode'\nimport { activeInstance } from '../instance/lifecycle'\n\n\nconst componentVNodeHooks: any = {\n    init(vnode: any, hydrating: boolean) {\n        const child = vnode.componentInstance = createComponentInstanceForVnode(vnode, activeInstance)\n        child.$mount(hydrating ? vnode.elm : undefined, hydrating)\n    },\n    prepatch(oldVnode: any, vnode: any) {\n\n    },\n    insert(vnode: any) {\n\n    },\n    destroy(vnode: any) {\n\n    }\n}\n\nconst hooksToMerge = Object.keys(componentVNodeHooks)\n\n\nexport function createComponent (\n    Ctor: any | void,\n    data?: any,\n    context?: any,\n    children?: any,\n    tag?: string\n) {\n\n    if (isUndef(Ctor)) {\n        return\n    }\n\n    const baseCtor = context.$options._base// Kyue\n\n    if (isObject(Ctor)) {\n        Ctor = baseCtor.extend(Ctor)\n    }\n\n    if (typeof Ctor !== 'function') {\n        if (process.env.NODE_ENV !== 'production') {\n            warn(`Invalid Component definition: ${String(Ctor)}`, context)\n        }\n        return\n    }\n\n    data = data || {}\n    \n    let propsData = {}\n\n    let listeners = {}\n\n    intallComponentHooks(data)\n\n    const name = Ctor.options.name || tag || 'app'// TODO\n    const vnode = new VNode(\n        `kyue-component-${Ctor.cid}${name ? `-${name}` : ''}`,\n        data, undefined, undefined, undefined, context,\n        { Ctor, propsData, listeners, tag, children }\n    ) \n    \n    return vnode\n}\n\nexport function createComponentInstanceForVnode(\n    vnode: any, \n    parent: any// 当前vm的实例\n) {\n    const options: any = {\n        _isComponent: true,\n        _parentVnode: vnode,// 组件vnode，即占位符vnode\n        parent\n    }\n\n    return new vnode.componentOptions.Ctor(options)\n}\n\nfunction intallComponentHooks(data: any) {\n    const hooks = data.hook || (data.hook = {})\n    for (let i = 0; i < hooksToMerge.length; i++) {\n        const key = hooksToMerge[i]\n        const existing = hooks[key]\n        const toMerge = componentVNodeHooks[key]\n        if (existing !== toMerge && !(existing && existing._merged)) {\n            hooks[key] = existing ? mergeHook(toMerge, existing) : toMerge\n        }\n    }\n}\n\nfunction mergeHook(f1: any, f2: any): Function {\n    const merged = (a: any, b: any) => {\n        f1(a, b)\n        f2(a, b)\n    }\n    merged._merged = true\n    return merged\n}","import VNode, { createTextVNode } from './vnode'\nimport { createComponent } from './create-component'\n\nimport {\n    isPrimitive, isTrue\n} from '../util/index'\n\n\nconst SIMPLE_NORMALIZE = 1\nconst ALWAYS_NORMALIZE = 2\n\n/**\n * 包装函数，以提供更灵活的界面\n * 不会被流程大吼大叫\n * @param context \n * @param tag \n * @param data \n * @param children \n */\nexport function createElement(\n    context: any, \n    tag: any, \n    data: any, \n    children: any,\n    normalizationType: any,\n    alwaysNormalize: boolean\n) {\n    if (Array.isArray(data) || isPrimitive(data)) {\n        normalizationType = children\n        children = data\n        data = undefined\n    }\n\n    if (isTrue(alwaysNormalize)) {\n        normalizationType = ALWAYS_NORMALIZE\n    }\n\n    return _createElement(context, tag, data, children, normalizationType)\n}\n\nexport function _createElement(\n    context: any, \n    tag?: any, \n    data?: any, \n    children?: any,\n    normalizationType?: number\n) {\n\n    if (normalizationType === ALWAYS_NORMALIZE) {\n        // 将children转化成Array<VNode>，如：文本节点也会转化成[VNode]\n        children = normalizeChildren(children)\n    } else if (normalizationType === SIMPLE_NORMALIZE) {\n        // 将二维Array<VNode>拍成一维Array<VNode>\n        children = simpleNormalizeChildren(children)\n    }\n\n    let vnode\n\n    if (typeof tag === 'string') {\n        // 普通节点\n        vnode = new VNode(tag, data, children)\n    } else {\n        // 组件\n        vnode = createComponent(tag, data, context, children)\n    }\n\n    return vnode\n}\n\n\n/**\n * TODO\n * @param children \n */\nfunction simpleNormalizeChildren(children: any) {\n    return children\n}\n\n/**\n * TODO\n */\nfunction normalizeChildren(children: any) {\n    return isPrimitive(children) \n        ? [createTextVNode(children)]\n        : Array.isArray(children) \n            ? children\n            : undefined\n}","import { createElement } from '../vdom/create-element'\n\nexport function renderMixin(Kyue: any) {\n\n    Kyue.prototype._render = function() {\n        const vm = this\n        const { render, _parentVnode } = vm.$options\n\n        // 占位符vnode，初始化 _parentVnode 为 undefined\n        vm.$vnode = _parentVnode\n        console.log('_render:', 'vm.$vnode = _parentVnodes (' + (_parentVnode && _parentVnode.tag) + ')')\n\n        let vnode\n        try {\n            vnode = render.call(vm, vm.$createElement)\n        } catch (e) {\n\n        } finally {\n\n        }\n\n        // 占位符vnode是渲染vnode的父级\n        vnode.parent = _parentVnode\n\n        return vnode\n    }\n}\n\nexport function initRender(vm: any) {\n    vm._vnode = null\n\n    const options = vm.$options\n    const parentVnode = vm.$vnode = options._parentVnode\n\n    vm.$createElement = (a: any, b: any, c: any, d: any) => createElement(vm, a, b, c, d, true)\n}\n\n","import { initLifecycle } from './lifecycle'\nimport { initState } from './state'\nimport { initRender } from './render'\n\nlet uid = 0\n\nexport function initMixin(Kyue: any) {\n    Kyue.prototype._init = function(options?: any) {\n        console.log('_init:', 'vm\\'s init')\n\n        const vm = this\n\n        vm._uid = uid++\n        \n        vm._isVue = true\n\n        if (options && options._isComponent) {\n            // 优化内部组件实例化，因为动态选项合并非常慢，并且没有内部组件选项需要特殊处理。\n            initInternalComponent(vm, options)\n        } else {\n            vm.$options = options\n        }\n\n        /**TODO**/\n        vm.$options._base = Kyue\n        /**TODO**/\n        \n        vm._self = vm\n        /**\n         * 1、noop\n         */\n        initLifecycle(vm)\n        /**\n         * 1、给实例添加options.data中数据的代理 \n         */ \n        initState(vm)\n        /**\n         * 1、给实例添加$createElement方法\n         */\n        initRender(vm)\n\n        if (vm.$options.el) {\n            console.log('_init:', 'vm.$mount')\n            // 返回的是 vm\n            vm.$mount(vm.$options.el)\n        }\n\n    }\n}\n\nexport function initInternalComponent(vm: any, options: any) {\n    const opts = vm.$options = Object.create(vm.constructor.options)\n    const parentVnode = options._parentVnode\n    opts.parent = options.parent\n    opts._parentVnode = parentVnode\n\n    const vnodeComponentOptions = parentVnode.componentOptions\n    opts.propsData = vnodeComponentOptions.propsData\n    opts._parentListeners = vnodeComponentOptions.listeners\n    opts._renderChildren = vnodeComponentOptions.children\n    opts._componentTag = vnodeComponentOptions.tag\n\n    if (options.render) {\n        opts.render = options.render\n    }\n}","import VNode from \"./vnode\"\nimport { isPrimitive, isDef, isTrue, isUndef } from \"../util/index\"\n\n\nfunction emptyNodeAt(elm: Element) {\n    return new VNode(elm.tagName.toLocaleLowerCase(), {}, [], undefined, elm)\n}\n\nfunction createElm(vnode: any, insertedVnodeQueue: [], parentElm?: Element, refElm?: Element) {\n    console.log('createElm:', vnode)\n\n    /****组件的创建****/\n    if (createComponent(vnode, insertedVnodeQueue, parentElm, refElm)) {\n        return\n    }\n\n    /****普通节点的创建****/\n    const data = vnode.data\n    const children = vnode.children\n    const tag = vnode.tag\n\n    if (isDef(tag)) {\n        vnode.elm = vnode.ns\n            ? document.createElementNS(vnode.ns, tag)\n            : document.createElement(tag, vnode)\n    \n        createChildren(vnode, children, insertedVnodeQueue)\n    \n        if (data) {\n            setData(vnode, data);\n        }\n\n        insert(parentElm, vnode.elm, refElm)\n    } else if (isTrue(vnode.isComment)) {\n        // 注释节点\n\n    } else {\n        // 文本节点\n        vnode.elm = document.createTextNode(vnode.text)\n        insert(parentElm, vnode.elm, refElm)\n    }\n\n}\n\nfunction createChildren(vnode: VNode, children: [], insertedVnodeQueue: []) {\n    if (Array.isArray(children)) {\n        for (let i = 0; i < children.length; ++i) {\n            createElm(children[i], insertedVnodeQueue, vnode.elm, null)\n        }\n    } else if (isPrimitive(vnode.text)) {\n        let text = String(vnode.text || vnode.children)\n        vnode.elm.appendChild(document.createTextNode(text))\n    }\n}\n\nfunction setData(vnode: any, data: any) {\n    for (var key in data) {\n        if (key == 'attrs') {\n            for (var attr in data[key]) {\n                vnode.elm.setAttribute(attr, data[key][attr])\n            }\n        }\n    }\n}\n\nfunction insert(parent: Element, elm: Element, ref: Element) {\n    if (parent) {\n        if (ref) {\n            if (ref.parentNode === parent) {\n                parent.insertBefore(elm, ref)\n            }\n        } else {\n            parent.appendChild(elm)\n        }\n    }\n}\n\nfunction removeVnodes(vnodes: any, startIdx: number, endIdx: number) {\n    for (; startIdx <= endIdx; ++startIdx) {\n        const ch = vnodes[startIdx]\n        if (ch) {\n            if (ch.tag) {\n                // TODO\n                removeNode(ch.elm)\n            } else {// Text node\n                removeNode(ch.elm)\n            }\n        }\n    }\n}\n\nfunction removeNode(el: Element) {\n    const parent = el.parentNode\n\n    if (parent) {\n        parent.removeChild(el)\n    }\n}\n\n\nexport function patch(oldVnode: any, vnode: any, hydrating?: boolean, removeOnyl?: boolean) {\n    let isInitialPatch = false\n    const insertedVnodeQueue: [] = []\n\n    \n    if (isUndef(oldVnode)) {\n        // 组件的 mount，生成一个新的root元素\n        isInitialPatch = true\n        createElm(vnode, insertedVnodeQueue)\n    } else {\n        const isRealElement = oldVnode.nodeType\n\n        // TODO sameVnode(oldVnode, vnode)\n        if (!isRealElement) {\n            console.log('patch.update:', 'sameVnode')\n\n\n\n        } else {\n            if (isRealElement) {\n                oldVnode = emptyNodeAt(oldVnode)\n            }\n\n            const oldElm = oldVnode.elm\n            const parentElm = oldElm.parentNode\n    \n            createElm(\n                vnode,\n                insertedVnodeQueue,\n                oldElm._leaveCb ? null : parentElm,\n                oldElm.nextSibling\n            )\n\n            if (parentElm) {\n                removeVnodes([oldVnode], 0, 0)\n            }\n        }\n    }\n\n    return vnode.elm\n}\n\n\nfunction createComponent(vnode: any, insertedVnodeQueue: [], parentElm: any, refElm: any) {\n    let i = vnode.data\n    if (isDef(i)) {\n\n        if (isDef(i = i.hook) && isDef(i = i.init)) {\n            i(vnode, false)/* hydrating */\n        }\n\n        if (isDef(vnode.componentInstance)) {\n            initComponent(vnode, insertedVnodeQueue)\n            insert(parentElm, vnode.elm, refElm)\n            return true\n        }\n    }\n}\n\nfunction initComponent(vnode: any, insertedVnodeQueue: []) {\n    vnode.elm = vnode.componentInstance.$el\n\n}","// @ts-nocheck\n\nimport { warn, query } from '../util/index'\nimport { initMixin } from './init'\nimport { lifecycleMixin, mountComponent } from './lifecycle'\nimport { renderMixin } from './render'\nimport { patch } from '../vdom/patch'\n\nfunction Kyue(options: any) {\n    if (process.env.NODE_ENV !== 'production' && !(this instanceof Kyue)) {\n        warn('Kyue is a constructor and should be called with the `new` keyword')\n    }\n    \n    this._init(options)\n}\n\nKyue.prototype.$mount = function(el?: string | Element, hydrating?: boolean) {\n    el = el && query(el)\n\n    return mountComponent(this, el, hydrating)\n}\n\nKyue.prototype.__patch__ = patch\n\n/**\n * 1、给实例添加_init方法\n * 2、组件调用 $mount 方法进行挂载\n */ \ninitMixin(Kyue)\n/**\n * 1、给实例添加_update方法 \n *  \n */ \nlifecycleMixin(Kyue)\n/**\n * 1、给实例添加_render方法\n *  该方法生成虚拟DOM：vnode\n */ \nrenderMixin(Kyue)\n\n\n/**\n * 全局API\n * 书写位置TODO\n */ \nKyue.options = Object.create(null)\nKyue.options._base = Kyue\n\nKyue.cid = 0\nlet cid = 1\n\nKyue.extend = function(extendOptions: any): Function {\n    extendOptions = extendOptions || {}\n    const Super = this\n    const SuperId = Super.cid\n    const cachedCtors = extendOptions._Ctor || (extendOptions._Ctor = {})\n    if (cachedCtors[SuperId]) {\n        return cachedCtors[SuperId]\n    }\n\n    const name = extendOptions.name || Super.options.name\n\n    const Sub = function KyueComponent(options: any) {\n        this._init(options)\n    }\n    Sub.prototype = Object.create(Super.prototype)\n    Sub.prototype.constructor = Sub\n    Sub.cid = cid++\n    Sub.options = extendOptions// TODO\n    Sub.super = Super\n\n    Sub.extend = Super.extend\n\n    Sub.superOptions = Super.options\n    Sub.extendOptions = extendOptions\n    \n    // cache constructor\n    cachedCtors[SuperId] = Sub\n    return Sub\n}\n\n\nexport default Kyue"],"names":["createComponent"],"mappings":"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"}